# README
Быстрый амперметр, маскирующийся под звуковую карту.

## Железо
Адаптировано для производства методом ЛУТ на одностороннем тектолите, требуется сзелать 3 проволочные перемычки на обратной стороне платы.
- [Схема](hardware/scematic.pdf)
- [Плата](hardware/LUT-print.pdf)
- [Gerber](hardware/Gerber.zip)

## ПО
По сути это USB-микрофон, передающий в ПК отсчеты АЦП без какого-либо преобразования.
- Отсчеты в левом канале пропорциональны току через шунт `R20`
- Отсчеты в правом канале пропорциональны напряжению питания нагрузки (разъём `U7`)

> [!WARNING] 
> Следует помнить, что 12 битные отсчеты АЦП сдвинуты влево до длины 16 бит. ПО для звукозаписи интерпритирует отсчеты как знаковые (S16), поэтому если смотреть через такое ПО (например `Audacity`) будут наблюдаться переполения через 32768.

> [!CAUTION] 
> Значения тока/напряжения не вычисляются!
> Автор не ставил целью получения абсолютных значений тока и напряжений (а только изменений во времени), поэтому если пользователь желает получить конкретные значения то ему надлежит самостоятельно пересчитать значения АЦП в величины ток и напряжений зная номинальные значяя резисторов:
> - Ток (левый канал): Шунт `R20`, Дифференциальный усилитель: `R19 == R16`, `R18 == R17` согласно [стате](https://www.rlocman.ru/review/article.html?di=646739).
> - Наряжение (правый кнал): Делитель `R13`-`R14`.

### Библиотеки
- [RTIC](https://github.com/rtic-rs/rtic) v2.1
- [Форк stm32-usbd](https://github.com/ololoshka2871/stm32-usbd) драйвера USB для корретной работы изохронных транзакций